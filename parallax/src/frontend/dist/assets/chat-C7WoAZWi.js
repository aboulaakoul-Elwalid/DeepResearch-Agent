import{v as Ne,w as qe,r as f,R as Be,x as We,a as N,g as q,u as B,j as s,s as R,b as W,d as T,e as D,m as Z,i as De,y as _e,z as Oe,D as M,E as Qe,k as _,o as ve,F as le,n as $,S as I,q as X,G as Ke,H as me,I as Ve,P as fe,T as y}from"./App-DvtGxVna.js";import{i as ne,b as Ge,c as xe,F as Ye,u as ie,f as de,O as Je,d as Xe,e as Ze,S as et,D as tt,g as rt,I as st,C as ot,h as ae,B as J}from"./main-layout-Cx9vH-fE.js";function nt(e,t,r,o,l){const[n,p]=f.useState(()=>l&&r?r(e).matches:o?o(e).matches:t);return We(()=>{if(!r)return;const c=r(e),d=()=>{p(c.matches)};return d(),c.addEventListener("change",d),()=>{c.removeEventListener("change",d)}},[e,r]),n}const at={...Be},ge=at.useSyncExternalStore;function lt(e,t,r,o,l){const n=f.useCallback(()=>t,[t]),p=f.useMemo(()=>{if(l&&r)return()=>r(e).matches;if(o!==null){const{matches:i}=o(e);return()=>i}return n},[n,e,o,l,r]),[c,d]=f.useMemo(()=>{if(r===null)return[n,()=>()=>{}];const i=r(e);return[()=>i.matches,m=>(i.addEventListener("change",m),()=>{i.removeEventListener("change",m)})]},[n,r,e]);return ge(d,c,p)}function ye(e={}){const{themeId:t}=e;return function(o,l={}){let n=Ne();n&&t&&(n=n[t]||n);const p=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:c=!1,matchMedia:d=p?window.matchMedia:null,ssrMatchMedia:a=null,noSsr:i=!1}=qe({name:"MuiUseMediaQuery",props:l,theme:n});let m=typeof o=="function"?o(n):o;return m=m.replace(/^@media( ?)/m,""),m.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(ge!==void 0?lt:nt)(m,c,d,a,i)}}ye();function it(e){return N("MuiFormControl",e)}q("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const dt=e=>{const{classes:t,margin:r,fullWidth:o}=e,l={root:["root",r!=="none"&&`margin${T(r)}`,o&&"fullWidth"]};return D(l,it,t)},ct=R("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`margin${T(r.margin)}`],r.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),pt=f.forwardRef(function(t,r){const o=B({props:t,name:"MuiFormControl"}),{children:l,className:n,color:p="primary",component:c="div",disabled:d=!1,error:a=!1,focused:i,fullWidth:m=!1,hiddenLabel:h=!1,margin:v="none",required:u=!1,size:b="medium",variant:x="outlined",...C}=o,P={...o,color:p,component:c,disabled:d,error:a,fullWidth:m,hiddenLabel:h,margin:v,required:u,size:b,variant:x},ee=dt(P),[w,te]=f.useState(()=>{let S=!1;return l&&f.Children.forEach(l,g=>{if(!ne(g,["Input","Select"]))return;const U=ne(g,["Select"])?g.props.input:g;U&&Ge(U.props)&&(S=!0)}),S}),[O,L]=f.useState(()=>{let S=!1;return l&&f.Children.forEach(l,g=>{ne(g,["Input","Select"])&&(xe(g.props,!0)||xe(g.props.inputProps,!0))&&(S=!0)}),S}),[Q,z]=f.useState(!1);d&&Q&&z(!1);const K=i!==void 0&&!d?i:Q;let V;f.useRef(!1);const G=f.useCallback(()=>{L(!0)},[]),E=f.useCallback(()=>{L(!1)},[]),re=f.useMemo(()=>({adornedStart:w,setAdornedStart:te,color:p,disabled:d,error:a,filled:O,focused:K,fullWidth:m,hiddenLabel:h,size:b,onBlur:()=>{z(!1)},onFocus:()=>{z(!0)},onEmpty:E,onFilled:G,registerEffect:V,required:u,variant:x}),[w,p,d,a,O,K,m,h,V,E,G,u,b,x]);return s.jsx(Ye.Provider,{value:re,children:s.jsx(ct,{as:c,ownerState:P,className:W(ee.root,n),ref:r,...C,children:l})})});function ut(e){return N("MuiFormHelperText",e)}const he=q("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var be;const mt=e=>{const{classes:t,contained:r,size:o,disabled:l,error:n,filled:p,focused:c,required:d}=e,a={root:["root",l&&"disabled",n&&"error",o&&`size${T(o)}`,r&&"contained",c&&"focused",p&&"filled",d&&"required"]};return D(a,ut,t)},ft=R("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${T(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})(Z(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${he.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${he.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),xt=f.forwardRef(function(t,r){const o=B({props:t,name:"MuiFormHelperText"}),{children:l,className:n,component:p="p",disabled:c,error:d,filled:a,focused:i,margin:m,required:h,variant:v,...u}=o,b=ie(),x=de({props:o,muiFormControl:b,states:["variant","size","disabled","error","filled","focused","required"]}),C={...o,component:p,contained:x.variant==="filled"||x.variant==="outlined",variant:x.variant,size:x.size,disabled:x.disabled,error:x.error,filled:x.filled,focused:x.focused,required:x.required};delete C.ownerState;const P=mt(C);return s.jsx(ft,{as:p,className:W(P.root,n),ref:r,...u,ownerState:C,children:l===" "?be||(be=s.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):l})});function ht(e){return N("MuiFormLabel",e)}const H=q("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),bt=e=>{const{classes:t,color:r,focused:o,disabled:l,error:n,filled:p,required:c}=e,d={root:["root",`color${T(r)}`,l&&"disabled",n&&"error",p&&"filled",o&&"focused",c&&"required"],asterisk:["asterisk",n&&"error"]};return D(d,ht,t)},vt=R("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color==="secondary"&&t.colorSecondary,r.filled&&t.filled]}})(Z(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(De()).map(([t])=>({props:{color:t},style:{[`&.${H.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${H.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${H.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),gt=R("span",{name:"MuiFormLabel",slot:"Asterisk"})(Z(({theme:e})=>({[`&.${H.error}`]:{color:(e.vars||e).palette.error.main}}))),yt=f.forwardRef(function(t,r){const o=B({props:t,name:"MuiFormLabel"}),{children:l,className:n,color:p,component:c="label",disabled:d,error:a,filled:i,focused:m,required:h,...v}=o,u=ie(),b=de({props:o,muiFormControl:u,states:["color","required","focused","disabled","error","filled"]}),x={...o,color:b.color||"primary",component:c,disabled:b.disabled,error:b.error,filled:b.filled,focused:b.focused,required:b.required},C=bt(x);return s.jsxs(vt,{as:c,ownerState:x,className:W(C.root,n),ref:r,...v,children:[l,b.required&&s.jsxs(gt,{ownerState:x,"aria-hidden":!0,className:C.asterisk,children:[" ","*"]})]})});function Ct(e){return N("MuiInputLabel",e)}q("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const St=e=>{const{classes:t,formControl:r,size:o,shrink:l,disableAnimation:n,variant:p,required:c}=e,d={root:["root",r&&"formControl",!n&&"animated",l&&"shrink",o&&o!=="medium"&&`size${T(o)}`,p],asterisk:[c&&"asterisk"]},a=D(d,Ct,t);return{...t,...a}},wt=R(yt,{shouldForwardProp:e=>_e(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${H.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,r.size==="small"&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,r.focused&&t.focused,t[r.variant]]}})(Z(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="filled"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:r,size:o})=>t==="filled"&&r.shrink&&o==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="outlined"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),kt=f.forwardRef(function(t,r){const o=B({name:"MuiInputLabel",props:t}),{disableAnimation:l=!1,margin:n,shrink:p,variant:c,className:d,...a}=o,i=ie();let m=p;typeof m>"u"&&i&&(m=i.filled||i.focused||i.adornedStart);const h=de({props:o,muiFormControl:i,states:["size","variant","required","focused"]}),v={...o,disableAnimation:l,formControl:i,shrink:m,size:h.size,variant:h.variant,required:h.required,focused:h.focused},u=St(v);return s.jsx(wt,{"data-shrink":m,ref:r,className:W(u.root,d),...a,ownerState:v,classes:u})});function jt(e){return N("MuiTextField",e)}q("MuiTextField",["root"]);const Ft={standard:Ze,filled:Xe,outlined:Je},It=e=>{const{classes:t}=e;return D({root:["root"]},jt,t)},Pt=R(pt,{name:"MuiTextField",slot:"Root"})({}),Ce=f.forwardRef(function(t,r){const o=B({props:t,name:"MuiTextField"}),{autoComplete:l,autoFocus:n=!1,children:p,className:c,color:d="primary",defaultValue:a,disabled:i=!1,error:m=!1,FormHelperTextProps:h,fullWidth:v=!1,helperText:u,id:b,InputLabelProps:x,inputProps:C,InputProps:P,inputRef:ee,label:w,maxRows:te,minRows:O,multiline:L=!1,name:Q,onBlur:z,onChange:K,onFocus:V,placeholder:G,required:E=!1,rows:re,select:S=!1,SelectProps:g,slots:U={},slotProps:Se={},type:we,value:ce,variant:Y="outlined",...ke}=o,k={...o,autoFocus:n,color:d,disabled:i,error:m,fullWidth:v,multiline:L,required:E,select:S,variant:Y},je=It(k),j=Oe(b),se=u&&j?`${j}-helper-text`:void 0,pe=w&&j?`${j}-label`:void 0,Fe=Ft[Y],F={slots:U,slotProps:{input:P,inputLabel:x,htmlInput:C,formHelperText:h,select:g,...Se}},A={},oe=F.slotProps.inputLabel;Y==="outlined"&&(oe&&typeof oe.shrink<"u"&&(A.notched=oe.shrink),A.label=w),S&&((!g||!g.native)&&(A.id=void 0),A["aria-describedby"]=void 0);const[Ie,Pe]=M("root",{elementType:Pt,shouldForwardComponentProp:!0,externalForwardedProps:{...F,...ke},ownerState:k,className:W(je.root,c),ref:r,additionalProps:{disabled:i,error:m,fullWidth:v,required:E,color:d,variant:Y}}),[Me,Re]=M("input",{elementType:Fe,externalForwardedProps:F,additionalProps:A,ownerState:k}),[Te,Le]=M("inputLabel",{elementType:kt,externalForwardedProps:F,ownerState:k}),[ze,Ee]=M("htmlInput",{elementType:"input",externalForwardedProps:F,ownerState:k}),[Ue,Ae]=M("formHelperText",{elementType:xt,externalForwardedProps:F,ownerState:k}),[$e,He]=M("select",{elementType:et,externalForwardedProps:F,ownerState:k}),ue=s.jsx(Me,{"aria-describedby":se,autoComplete:l,autoFocus:n,defaultValue:a,fullWidth:v,multiline:L,name:Q,rows:re,maxRows:te,minRows:O,type:we,value:ce,id:j,inputRef:ee,onBlur:z,onChange:K,onFocus:V,placeholder:G,inputProps:Ee,slots:{input:U.htmlInput?ze:void 0},...Re});return s.jsxs(Ie,{...Pe,children:[w!=null&&w!==""&&s.jsx(Te,{htmlFor:j,id:pe,...Le,children:w}),S?s.jsx($e,{"aria-describedby":se,id:j,labelId:pe,value:ce,input:ue,...He,children:p}):ue,u&&s.jsx(Ue,{id:se,...Ae,children:u})]})}),Mt=ye({themeId:Qe});/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=[["path",{d:"M9 14l-4 -4l4 -4",key:"svg-0"}],["path",{d:"M5 10h11a4 4 0 1 1 0 8h-1",key:"svg-1"}]],Tt=_("outline","arrow-back-up","ArrowBackUp",Rt);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 11l-6 -6",key:"svg-1"}],["path",{d:"M6 11l6 -6",key:"svg-2"}]],zt=_("outline","arrow-up","ArrowUp",Lt);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M15 4v16",key:"svg-1"}],["path",{d:"M9 10l2 2l-2 2",key:"svg-2"}]],Ut=_("outline","layout-sidebar-right-collapse","LayoutSidebarRightCollapse",Et);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M15 4v16",key:"svg-1"}],["path",{d:"M10 10l-2 2l2 2",key:"svg-2"}]],$t=_("outline","layout-sidebar-right-expand","LayoutSidebarRightExpand",At);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["path",{d:"M19 2h-14a3 3 0 0 0 -3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3 -3v-14a3 3 0 0 0 -3 -3z",key:"svg-0"}]],Nt=_("filled","square-filled","SquareFilled",Ht),qt=()=>{const[{modelName:e,clusterInfo:{status:t}}]=ve(),[{input:r,status:o},{setInput:l,generate:n,stop:p,clear:c}]=le(),d=f.useRef(!1),a=$(u=>{d.current=!0}),i=$(u=>{d.current=!1}),m=$(u=>{u.key==="Enter"&&!u.shiftKey&&!d.current&&(u.preventDefault(),n())}),h=$(u=>{o==="opened"||o==="generating"?p():(o==="closed"||o==="error")&&n()}),v=$(u=>{c()});return s.jsx(I,{"data-status":o,children:s.jsx(Ce,{value:r,onChange:u=>l(u.target.value),multiline:!0,maxRows:4,placeholder:"Ask anything",fullWidth:!0,onCompositionStart:a,onCompositionEnd:i,onKeyDown:m,slotProps:{input:{sx:{border:"1px solid",borderColor:"grey.300",borderRadius:2,fontSize:"0.95rem",boxShadow:"2px 2px 4px rgba(0,0,0,0.05)",flexDirection:"column","& textarea":{fontSize:"0.875rem",scrollbarWidth:"none",msOverflowStyle:"none","&::-webkit-scrollbar":{display:"none"}}},endAdornment:s.jsxs(I,{direction:"row",sx:{alignSelf:"flex-end",alignItems:"center",gap:2},children:[s.jsx(X,{variant:"text",sx:{color:"text.secondary"},startIcon:s.jsx(Tt,{}),disabled:o==="opened"||o==="generating",onClick:v,children:"Clear"}),s.jsx(X,{size:"small",color:"primary",disabled:t!=="available"||o==="opened",onClick:h,children:o==="opened"?s.jsx(tt,{size:"medium"}):o==="generating"?s.jsx(Nt,{size:"1.25rem"}):s.jsx(zt,{size:"1.25rem"})})]})}}})})},Bt=()=>{const[{messages:e}]=le();for(let t=e.length-1;t>=0;t--)if(e[t].role==="assistant")return e[t]};function _t(){const e=Ke(),t=Mt(e.breakpoints.down("md")),r=Bt(),[,{clear:o}]=le(),[,{refreshApiBase:l}]=ve(),[n,p]=f.useState(!t),[c,d]=f.useState(me());return s.jsx(rt,{children:s.jsxs(I,{direction:{xs:"column",md:"row"},sx:{width:"100%",height:"100%",gap:3},children:[s.jsxs(I,{flex:2,sx:{gap:2,minHeight:0},children:[s.jsxs(I,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[s.jsx(X,{size:"small",color:"primary",startIcon:s.jsx(st,{size:"1rem"}),onClick:o,disabled:r===void 0,children:"New chat"}),s.jsx(Ve,{size:"small",onClick:()=>p(a=>!a),"aria-label":n?"Hide trace panel":"Show trace panel",children:n?s.jsx(Ut,{}):s.jsx($t,{})})]}),s.jsx(ot,{}),s.jsx(qt,{})]}),n&&s.jsxs(fe,{variant:"outlined",sx:{flex:1,display:"flex",flexDirection:"column",gap:2,minHeight:0,p:2,bgcolor:"grey.50"},children:[s.jsx(y,{variant:"subtitle1",children:"Research Trace"}),s.jsx(ae,{}),s.jsx(J,{sx:{flex:1,overflow:"auto"},children:r?.toolCalls?.length?s.jsx(I,{gap:1.5,children:r.toolCalls.map(a=>s.jsxs(J,{sx:{p:1.25,borderRadius:2,border:"1px solid",borderColor:"grey.200"},children:[s.jsx(y,{variant:"subtitle2",children:a.name||"tool_call"}),s.jsx(y,{variant:"caption",color:"text.secondary",sx:{whiteSpace:"pre-wrap"},children:a.arguments}),r.toolOutputs?.filter(i=>i.toolCallId===a.id).map(i=>s.jsxs(J,{sx:{mt:.75},children:[s.jsx(y,{variant:"caption",color:"text.secondary",children:"Output"}),s.jsx(y,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:i.summary||i.content})]},i.toolCallId))]},a.id))}):s.jsx(y,{variant:"body2",color:"text.secondary",children:"Tool calls and traces will appear here."})}),s.jsx(ae,{}),s.jsx(y,{variant:"subtitle1",children:"Sources"}),s.jsx(J,{sx:{flex:1,overflow:"auto",display:"flex",flexDirection:"column",gap:1},children:r?.sources?.length?r.sources.map((a,i)=>s.jsxs(fe,{variant:"outlined",sx:{p:1.25,borderRadius:2},children:[s.jsxs(y,{variant:"subtitle2",children:[i+1,". ",a.title||a.url||"Source"]}),a.url&&s.jsx(y,{variant:"caption",color:"primary",component:"a",href:a.url,target:"_blank",rel:"noreferrer",sx:{display:"block",mb:.5,wordBreak:"break-all"},children:a.url}),a.snippet&&s.jsx(y,{variant:"body2",color:"text.secondary",children:a.snippet})]},a.id||i)):s.jsx(y,{variant:"body2",color:"text.secondary",children:"Citations from the assistant will show up here."})}),s.jsx(ae,{}),s.jsx(y,{variant:"subtitle1",children:"Endpoint"}),s.jsxs(I,{direction:"row",gap:1,alignItems:"center",children:[s.jsx(Ce,{size:"small",fullWidth:!0,label:"API base URL",value:c,onChange:a=>d(a.target.value)}),s.jsx(X,{size:"small",variant:"outlined",onClick:()=>l(c.trim()),disabled:c.trim()===me(),children:"Save"})]})]})]})})}export{_t as default};
